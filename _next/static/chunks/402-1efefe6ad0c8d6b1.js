!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5b98c4cd-f227-41ab-815c-37c52137bf0e",e._sentryDebugIdIdentifier="sentry-dbid-5b98c4cd-f227-41ab-815c-37c52137bf0e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{5880:function(e,t,n){n.r(t),n.d(t,{BBCodeRCC:function(){return r}});var a=n(3161);let r=e=>{let{standard:t,alternate:n}=e,{preferences:{quirks:r}}=(0,a.G)();return"off"===r?n:t};t.default=r},8853:function(e,t,n){n.r(t),n.d(t,{ShowHideLog:function(){return s}});var a=n(3431),r=n(125);let s=e=>{let{open:t,close:n,children:s,className:o,is:l}=e,[c,i]=(0,r.useState)(l===t);return(0,a.jsxs)("span",{className:o,"data-sentry-component":"ShowHideLog","data-sentry-source-file":"ShowHideLog.tsx",children:[(0,a.jsx)("input",{type:"button",className:"peer mx-auto my-1 block rounded border border-solid border-gray-500 bg-[rgb(from_var(--bg-secondary)_r_g_b/var(--tw-bg-opacity))] bg-opacity-50 px-2 font-sans font-normal hover:bg-opacity-25",onClick:()=>{i(!c)},"data-open":t,"data-close":n,"data-state":c?"open":"close",value:c?n:t}),s]})}},1308:function(e,t,n){n.r(t),n.d(t,{Save:function(){return v},default:function(){return g}});var a=n(3431),r=n(4768),s=n(8767),o=n(3267),l=n(8003),c=n(3161);let i=e=>{let{className:t,...n}=e,{preferencesForm:r,updatePreferencesForm:o,submitPreferencesForm:i}=(0,c.G)(),{closeModal:u}=(0,l.d)();return(0,a.jsxs)("form",{action:()=>{i(),u()},className:[t,"settings"].join(" ").trim(),...n,"data-sentry-component":"Form","data-sentry-source-file":"Settings.tsx",children:[(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("legend",{className:"settings__legend",children:"Reader Experience"}),(0,a.jsx)("ol",{className:"settings__list",children:(0,a.jsxs)(s.ck,{className:"settings__item","data-sentry-element":"Item","data-sentry-source-file":"Settings.tsx",children:[(0,a.jsx)("input",{className:"settings__input",type:"checkbox",id:"quirks",name:"quirks",value:r.quirks?"on":"off",checked:"on"===r.quirks,onChange:e=>o({quirks:e.target.checked?"on":"off"})}),(0,a.jsxs)("label",{htmlFor:"quirks",className:"settings__label",children:[(0,a.jsx)("span",{className:"settings__name",children:"Character Typing Quirks"}),(0,a.jsx)("span",{className:"settings__description",children:"Enable or disable significant character typing quirks. Enabled by default."})]})]})})]}),(0,a.jsx)("fieldset",{children:(0,a.jsx)("ol",{className:"settings__list",children:(0,a.jsx)(s.ck,{className:"settings__item","data-sentry-element":"Item","data-sentry-source-file":"Settings.tsx",children:(0,a.jsx)("button",{className:"settings__submit btn btn--primary",type:"submit",children:(0,a.jsx)("span",{children:"Submit"})})})})})]})},u={Button:()=>{let{openModal:e}=(0,l.d)();return(0,a.jsx)(s.JO.Button,{className:"comic-footer__btn",onClick:()=>{e((0,a.jsx)(i,{className:"modal__form"}),"Settings")},icon:[o.Z,{className:"comic-footer__icon"}],"data-sentry-element":"unknown","data-sentry-component":"Button","data-sentry-source-file":"Settings.tsx"})}};var d=n(125),f=n(9544);let m=()=>{let[e,t]=(0,d.useState)({autoSave:"off",saveData:{}});return(0,d.useEffect)(()=>{if(window.localStorage){var e;t(f.vc.parse(JSON.parse(null!==(e=localStorage.getItem("save"))&&void 0!==e?e:"{}")))}},[]),{save:e,setSaveData:n=>{let a={autoSave:e.autoSave,saveData:{...e.saveData,...n}};localStorage.setItem("save",JSON.stringify(a)),t(a)},setAutoSave:n=>{let a={...e,autoSave:n};localStorage.setItem("save",JSON.stringify(a)),t(a)},getStorySaveURL:t=>void 0!==e.saveData[t]?"".concat(t,"/").concat(e.saveData[t]):"#"}},v=e=>{let{page:{pageNumber:t,story:{slug:n,url:o}}}=e,{save:l,setSaveData:c,setAutoSave:i,getStorySaveURL:d}=m();return"on"==l.autoSave&&l.saveData[o]<t&&c({[o]:t}),(0,a.jsxs)(s.v2,{className:"comic-footer__menu","data-sentry-element":"Menu","data-sentry-component":"Save","data-sentry-source-file":"Save.tsx",children:[(0,a.jsx)(s.ck,{className:"comic-footer__item","data-sentry-element":"Item","data-sentry-source-file":"Save.tsx",children:(0,a.jsx)("button",{onClick:()=>{c({[o]:t})},className:"comic-footer__link",children:"Save Game"})}),(0,a.jsx)(s.ck,{className:"comic-footer__item","data-sentry-element":"Item","data-sentry-source-file":"Save.tsx",children:(0,a.jsx)("button",{onClick:()=>{i("off"===l.autoSave?"on":"off")},className:"comic-footer__link",children:"Auto-Save!"})}),(0,a.jsx)(s.ck,{className:"comic-footer__item","data-sentry-element":"Item","data-sentry-source-file":"Save.tsx",children:l.saveData[o]?(0,a.jsx)(r.default,{href:"".concat(o,"/").concat(l.saveData[o]),className:"comic-footer__link",prefetch:!0,children:"Load Game"}):(0,a.jsx)("button",{onClick:()=>{alert("No Save Data Found!")},className:"comic-footer__link",children:"Load Game"})}),(0,a.jsx)(s.ck,{className:"comic-footer__item","data-sentry-element":"Item","data-sentry-source-file":"Save.tsx",children:(0,a.jsx)("button",{onClick:()=>{alert("Coming soon!")},className:"comic-footer__link",children:"Delete Game Data"})}),(0,a.jsx)(s.ck,{className:"comic-footer__item","data-sentry-element":"Item","data-sentry-source-file":"Save.tsx",children:(0,a.jsx)(u.Button,{"data-sentry-element":"unknown","data-sentry-source-file":"Save.tsx"})})]})};var g=v},6882:function(e,t,n){n.r(t),n.d(t,{DEFAULT_ACTIONS:function(){return c},Hotkey:function(){return i},default:function(){return u}});var a=n(3431),r=n(4780),s=n(125);let o={pageBackward:()=>{},pageForward:()=>{}},l=e=>{(0,s.useEffect)(()=>{let t={...o,...e},n=e=>{switch(e.key){case"ArrowLeft":return t.pageBackward();case"ArrowRight":return t.pageForward();default:return}};return window.addEventListener("keydown",n,!1),()=>{window.removeEventListener("keydown",n,!1)}},[e])},c={pageBackward:e=>{let{router:t}=e;return e=>{let{prev:n}=e;if(n.length>0){let e=n[0].url;t.push(e)}}},pageForward:e=>{let{router:t}=e;return e=>{let{next:n}=e;if(n.length>0){let e=n[0].url;t.push(e)}}}},i=e=>{let{actions:t}=e,n={router:(0,r.useRouter)()};return l(Object.assign({},...Object.entries(t).map(e=>{let[t,a]=e,r=c[t];return{[t]:()=>r(n)(a)}}))),(0,a.jsx)(a.Fragment,{})};var u=i},5634:function(e,t,n){n.r(t),n.d(t,{MultimediaRCC:function(){return a}});let a=e=>{let{html5:t=null,video:n=null,flash:a=null,youtube:r=null}=null!=e?e:{};return t||null};t.default=a},3101:function(e,t,n){n.d(t,{D:function(){return l},t:function(){return s}});var a=n(3431),r=n(125);let s=(0,r.createContext)({modal:!1,modalContents:{element:null},setModal:()=>{},setModalContents:()=>{}}),o=()=>{let[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)({element:null});return{modal:e,modalContents:n,setModal:t,setModalContents:a}},l=e=>{let{children:t}=e;return(0,a.jsx)(s.Provider,{value:o(),"data-sentry-element":"unknown","data-sentry-component":"ModalProvider","data-sentry-source-file":"ModalProvider.tsx",children:t})}},4944:function(e,t,n){n.d(t,{C:function(){return i},n:function(){return l}});var a=n(3431),r=n(125),s=n(9296);let o={preferences:{quirks:s.ZD.Values.on,save:{autoSave:s.ZD.Values.off,saveData:{}}},setPreferences:()=>{}},l=(0,r.createContext)(o),c=()=>{let[e,t]=(0,r.useState)(o.preferences);return{preferences:e,setPreferences:t}},i=e=>{let{children:t}=e;return(0,a.jsx)(l.Provider,{value:c(),"data-sentry-element":"unknown","data-sentry-component":"PreferencesProvider","data-sentry-source-file":"PreferencesProvider.tsx",children:t})}},8767:function(e,t,n){n.d(t,{JO:function(){return s},ck:function(){return o},v2:function(){return l},JL:function(){return c},$0:function(){return i}});var a=n(3431),r=n(4768);let s={Link:e=>{let{icon:[t,n],href:s,className:o}=e;return(0,a.jsx)(r.default,{href:s,className:o,children:(0,a.jsx)(t,{className:[null==n?void 0:n.className,"icon"].filter(Boolean).join(" ")})})},Button:e=>{let{icon:[t,n],...r}=e;return(0,a.jsx)("button",{...r,children:(0,a.jsx)(t,{className:[null==n?void 0:n.className,"icon"].filter(Boolean).join(" ")})})}},o=e=>{let{children:t,...n}=e;return(0,a.jsx)("li",{...n,"data-sentry-component":"Item","data-sentry-source-file":"Item.tsx",children:t})},l=e=>{let{children:t,...n}=e;return(0,a.jsx)("menu",{...n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:t})},c=e=>{let{children:t,...n}=e;return(0,a.jsx)("nav",{...n,"data-sentry-component":"Nav","data-sentry-source-file":"Nav.tsx",children:t})},i=e=>{let{children:t,...n}=e;return(0,a.jsx)("section",{...n,"data-sentry-component":"Section","data-sentry-source-file":"Section.tsx",children:t})}},254:function(e,t,n){n.d(t,{f:function(){return o}});var a=n(125),r=n(5332);let s=n(9761).z.enum(["on","off"]),o=()=>{let[e,t]=(0,a.useState)("on"===s.default("off").parse((0,r.getCookie)("allowCookies"))),[n,o]=(0,a.useState)(!1),l=e=>{(0,r.hasCookie)(e)&&(0,r.setCookie)(e,(0,r.getCookie)(e),{maxAge:31536e3,sameSite:"lax"})};return(0,a.useEffect)(()=>{(0,r.hasCookie)("allowCookies")||o(!0),l("allowCookies")},[e]),{allowCookies:e,showCookieConsent:n,setAllowCookies:e=>{let n=e?s.Values.on:s.Values.off;t(e),(0,r.setCookie)("allowCookies",n)},setShowCookieConsent:e=>{o(e)},refreshCookieExpiration:l}}},8003:function(e,t,n){n.d(t,{d:function(){return s}});var a=n(3101),r=n(125);let s=()=>{let{modal:e,modalContents:t,setModal:n,setModalContents:s}=(0,r.useContext)(a.t);return(0,r.useEffect)(()=>{},[]),{modal:e,modalContents:t,openModal:(e,t)=>{s({element:e,title:t}),n(!0)},closeModal:()=>{n(!1),s({element:null})}}}},3161:function(e,t,n){n.d(t,{G:function(){return l}});var a=n(125),r=n(254),s=n(9544),o=n(4944);let l=()=>{let{allowCookies:e,refreshCookieExpiration:t,setShowCookieConsent:n}=(0,r.f)(),{preferences:l,setPreferences:c}=(0,a.useContext)(o.n),[i,u]=(0,a.useState)({quirks:l.quirks,save:l.save}),d=t=>{if(e){let e={...l,...t};c(e),localStorage.setItem("quirks",e.quirks),localStorage.setItem("save",JSON.stringify(e.save))}else n(!0)};return(0,a.useEffect)(()=>{t("quirks"),t("autoSave")},[t]),(0,a.useEffect)(()=>{if(window.localStorage&&e){let e=s.uP.parse({quirks:localStorage.getItem("quirks"),save:localStorage.getItem("save")});c(e),u(e)}},[e,c]),(0,a.useEffect)(()=>{},[]),{preferences:l,preferencesForm:i,setPreferences:d,updatePreferencesForm:e=>{u({...i,...e})},submitPreferencesForm:()=>{d(i)}}}},9544:function(e,t,n){n.d(t,{uP:function(){return a.uP},vc:function(){return a.vc}});var a=n(9296);new RegExp(/^[a-z0-9-]*[a-z0-9]$/),new RegExp(/^\.[a-zA-Z0-9]{2,}$/),new RegExp(/^[-\w.]+\/[-\w.]+$/),new RegExp(/^https:\/\/(www.youtube.com\/watch\?v=|youtu.be\/)[a-zA-Z0-9-_]{11,}$/),new RegExp(/^(\/[a-zA-z0-9-_\.]+)+$/)},9296:function(e,t,n){n.d(t,{ZD:function(){return r},uP:function(){return l},vc:function(){return o}});var a=n(9761);let r=a.z.enum(["on","off"]),s=a.z.record(a.z.string().regex(/^(\/[a-z0-9_-]+)+$/),a.z.number().int().positive()),o=a.z.object({autoSave:r.default("off"),saveData:s.default({})}),l=a.z.object({quirks:r.catch("on"),save:o.catch({autoSave:"off",saveData:{}})})}}]);